<Catalog>

    <CEffectApplyBehavior id="ScrinIonStormPowered"/>
    <CEffectApplyBehavior id="ScrinIonStormTargeted"/>

    <CBehaviorBuff id="ScrinIonStormPowered">
        <Alignment value="Positive"/>
        <InfoIcon value="Assets\icons\Nod\btn-nod-behavior-confessoraura.dds"/>
        <EditorCategories value="AbilityorEffectType:Units,Race:Nod"/>
        <MaxStackCountPerCaster value="1"/>
        <Duration value="1.6"/>
        <Modification MoveSpeedBonus="0.1992">
            <DamageDealtUnscaled index="Melee" value="1"/>
            <DamageDealtUnscaled index="Ranged" value="1"/>
            <DamageDealtUnscaled index="Splash" value="1"/>
        </Modification>
        <Modification UnifiedAttackSpeedFactor="0.1">
            <DamageTakenFraction index="Spell" value="-0.15"/>
            <DamageTakenFraction index="Melee" value="-0.15"/>
            <DamageTakenFraction index="Ranged" value="-0.15"/>
            <DamageTakenFraction index="Splash" value="-0.15"/>
            <DamageTakenFraction index="NoProc" value="-0.15"/>
        </Modification>
    </CBehaviorBuff>



    <CWeaponLegacy parent="ScrinWeapon" id="ScrinStormColumnWeapon">
        <TargetFilters value="Visible;Missile,Dead,Hidden,Invulnerable"/>
        <Period value="3.5"/>
        <Effect value="ScrinIonStormStrikeDamage"/>
        <Range value="10"/>
        <DamagePoint value="0.75"/>
    </CWeaponLegacy>

    <CActorRange id="ScrinIonStormRange">
        <Weapon value="ScrinStormColumnWeapon"/>
        <On Terms="SelectionLocalUpdate.ScrinStormColumn.Start" Send="Create"/>
        <On Terms="SelectionLocalUpdate.ScrinStormColumn.StartEditorGround" Send="Create"/>
        <On Terms="SelectionLocalUpdate.ScrinStormColumn.StartEditorFlyer" Send="Create"/>
        <On Terms="SelectionLocalUpdate.ScrinStormColumn.Stop" Send="Destroy"/>
    </CActorRange>


    <CModel id="ScrinIonStormPowered" parent="Glaze">
        <Model value="Assets\Effects\Glaze\PylonPowerOn_Glaze\PylonPowerOn_Glaze.m3"/>
        <OccludingOpacity value="1.000000"/>
        <Priority value="32"/>
    </CModel>
    <CActorModelMaterial id="ScrinIonStormPowered" parent="GlazeParent">
        <On Terms="ActorCreation" Send="ModelMaterialApplyTo ::Main"/>
        <On Terms="Behavior.ScrinIonStormPowered.On" Send="Create"/>
        <On Terms="Behavior.ScrinIonStormPowered.Off" Send="Destroy"/>
        <ModelFlags index="AutomateGlobalLoops" value="1"/>
    </CActorModelMaterial>

    <CBehaviorBuff id="ScrinIonStorm">
        <Period value="1.5"/>
        <PeriodicEffect value="ScrinIonStormPoweredEA"/>
    </CBehaviorBuff>
    <CEffectEnumArea id="ScrinIonStormPoweredEA">
        <SearchFilters value="-;Enemy,Neutral,Missile,Dead,Invulnerable"/>
        <AreaArray  Radius="10" Effect="ScrinIonStormPowered"/>
    </CEffectEnumArea>
    <CEffectDamage id="ScrinIonStormStrikeDamage">
        <Amount value="50"/>
        <Death value="Electrocute"/>
        <ArmorReduction value="1"/>
    </CEffectDamage>
    <!--    Lightning storm and big thunder strike-->
    <CActorModel id="ScrinIonStormStrike" parent="ModelAnimationStyleContinuous">
        <On index="0" Terms="Effect.ScrinIonStormStrikeDamage.Start" Send="Create"/>
        <On index="1" Terms="Effect.ScrinIonStormStrikeDamage.Start" Send="AnimBracketStart Attack1 Stand Stand Death"/>
        <On Terms="ActorCreation" Send="TimerSet 0.7 Destroy"/>
        <On Terms="TimerExpired; TimerName Destroy" Send="Destroy"/>
<!--        <On index="2" Terms="Behavior.ScrinIonStormPowered.Off" Send="Destroy"/>-->
<!--        <On Terms="Effect.ScrinIonStormStrikeDamageRangeSearch.Stop" Send="AnimBracketStop Attack1"/>-->
        <Host Subject=""/>
        <HostSiteOps Ops="SOpTargetPointStationary SOpShadow"/>
        <Model value="ScrinIonStormStrike"/>
        <Scale value="0.6,0.6,0.5"/>
    </CActorModel>
    <CActorSound id="ScrinIonStormStrikeSound" parent="SoundOneShot">
        <On Terms="Effect.ScrinIonStormStrikeDamage.Start" Send="Create"/>
        <Sound value="ScrinStormColumn_WeaponAttack"/>
    </CActorSound>
    <CModel id="ScrinIonStormStrike" parent="ImpactFX">
        <Model value="Assets\Models\Effect_LightningBolt.m3"/>
        <Flags index="Wait" value="1"/>
    </CModel>

<!--    ScrinStormColumn_WeaponAttack-->

    <CActorSiteOpLocalOffset id="SOpIonStormPositionShifted">
        <LocalOffset value="0.000000,0.000000,3.5"/>
    </CActorSiteOpLocalOffset>

    <!--    Lightning storm clouds-->
    <CActorModel id="ScrinIonStormClouds" parent="ModelAnimationStyleOneShotUNIT">
        <Flags index="SuppressSaveLoad" value="0"/>
        <Inherits index="BaseModelScale" value="1"/>
        <Inherits index="CastShadows" value="1"/>
        <Inherits index="CloakEffect" value="1"/>
        <Inherits index="CreepEngulfment" value="1"/>
        <Inherits index="Decal" value="1"/>
        <Inherits index="ModelMaterials" value="1"/>
        <Inherits index="Opacity" value="1"/>
        <Inherits index="Scale" value="1"/>
        <Inherits index="TeamColor" value="1"/>
        <Inherits index="TimeScale" value="1"/>
        <Inherits index="TintColor" value="1"/>
        <Inherits index="Visibility" value="1"/>
        <Inherits index="WarpGroup" value="1"/>
        <Scale value="1.25,1.25,1.25"/>
        <On Terms="Effect.ScrinIonStormPoweredEA.Start" Send="Create"/>
        <On Terms="ActorCreation" Send="SetOpacity 0 "/>
        <On Terms="ActorCreation" Send="SetOpacity 0.05 0.15"/>
        <On Terms="ActorCreation" Send="TimerSet 2 Hide"/>
        <On Terms="ActorCreation" Send="TimerSet 2.15 Destroy"/>
        <On Terms="TimerExpired; TimerName Hide" Send="SetOpacity 0 0.15"/>
        <On Terms="TimerExpired; TimerName Destroy" Send="Destroy"/>
        <Host Subject=""/>
        <HostSiteOps Ops="SOpTargetPointStationary SOpShadow SOpIonStormPositionShifted"/>
        <Model value="ScrinIonStormClouds"/>
        <ModelFlags index="UseSyncSeed" value="1"/>
    </CActorModel>
    <CModel id="ScrinIonStormClouds" parent="ImpactFX">
        <Model value="Assets\Effects\Protoss\XelNaga_PsionicStormCloud\XelNaga_PsionicStormCloud.m3"/>
        <Flags index="Wait" value="1"/>
    </CModel>
</Catalog>