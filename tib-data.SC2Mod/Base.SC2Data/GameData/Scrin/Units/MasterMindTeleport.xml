<Catalog>

    <CBehaviorBuff id="ScrinProdigyTeleportUnitsTargeting"/>

    <CRequirement id="NBU_ScrinProdigyTeleportUnitsTargeting">
        <NodeArray index="Show" Link="NBU_ScrinProdigyTeleportUnitsTargeting"/>
    </CRequirement>
    <CRequirement id="CBU_ScrinProdigyTeleportUnitsTargeting">
        <NodeArray index="Show" Link="CBU_ScrinProdigyTeleportUnitsTargeting"/>
    </CRequirement>
    <CRequirementCountBehavior parent="CBU" id="CBU_ScrinProdigyTeleportUnitsTargeting" behavior="ScrinProdigyTeleportUnitsTargeting"/>
    <CRequirementNot parent="NBU" id="NBU_ScrinProdigyTeleportUnitsTargeting" behavior="ScrinProdigyTeleportUnitsTargeting"/>
    
    
    <CAbilEffectTarget id="ScrinProdigyTeleportUnits">
        <Cost>
            <Charge Link="Abil/NovaNuclearStrike"/>
            <Cooldown Link="chaoshikong" TimeStart="5" TimeUse="5"/>
        </Cost>
        <Range value="500"/>
        <Arc value="360"/>
        <Marker Link="Abil/NovaNuclearStrike"/>
        <AlertArray index="Cast" value="CalldownLaunch"/>
        <CursorEffect value="RATeleportToSearchForOwnUnits"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="ScrinProdigyTeleportUnits" Requirements="NBU_ScrinProdigyTeleportUnitsTargeting"/>
        <CmdButtonArray index="Cancel" DefaultButtonFace="Cancel3"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="ScrinProdigyTeleportUnitsTargeting">
        <Cost>
            <Charge Link="Abil/NovaNuclearStrike"/>
            <Cooldown Link="chaoshikong" TimeStart="5" TimeUse="5"/>
        </Cost>
        <Range value="500"/>
        <Arc value="360"/>
        <Marker Link="Abil/NovaNuclearStrike"/>
        <AlertArray index="Cast" value="CalldownLaunch"/>
        <CursorEffect value="RATeleportToSearchForOwnUnits"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="ScrinProdigyTeleportUnitsTargeting" Requirements="CBU_ScrinProdigyTeleportUnitsTargeting"/>
        <CmdButtonArray index="Cancel" DefaultButtonFace="Cancel3"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="ScrinProdigyTeleportUnitsExecute">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <Effect index="0" value="ScrinProdigyTeleportUnitsExecute"/>
        <Cost>
            <Charge Link="Abil/NovaNuclearStrike"/>
            <Cooldown Link="chaoshikong" TimeUse="5"/>
        </Cost>
        <Range value="500"/>
        <Arc value="360"/>
        <Marker Link="Abil/NovaNuclearStrike"/>
        <AlertArray index="Cast" value="CalldownLaunch"/>
        <CursorEffect value="RATeleportToSearchForOwnUnits"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="ScrinProdigyTeleportUnitsExecute" />
        <CmdButtonArray index="Cancel" DefaultButtonFace="Cancel32"/>
    </CAbilEffectTarget>
    <CEffectEnumArea id="RATimeTeleportationSearchForZombieUnitsInTheWholeMapIsStill">
        <LaunchLocation Value="CasterPoint"/>
        <ImpactLocation Value="CasterPoint"/>
        <SearchFilters value="-;Self,Player,Ally,Neutral,Dead"/>
        <AreaArray Radius="500" Effect="herrschertenpotAB22"/>
        <Chance value="0"/>
    </CEffectEnumArea>
    <CEffectApplyBehavior id="herrschertenpotAB22">
        <Behavior value="herrschertenpotlocked22"/>
        <Chance value="0"/>
    </CEffectApplyBehavior>
    <CBehaviorBuff id="herrschertenpotlocked22">
        <InfoIcon value="Assets\Textures\btn-ability-protoss-hardenedshields-color.dds"/>
        <EditorCategories value="AbilityorEffectType:Units"/>
        <TimeScaleSource Value="Global"/>
        <Duration value="3"/>
        <Modification TimeScale="0.01">
            <ModifyFlags index="DisableAbils" value="1"/>
            <ModifyFlags index="DisableWeapons" value="1"/>
            <ModifyFlags index="Reveal" value="1"/>
            <ModifyFlags index="Detected" value="1"/>
            <ModifyFlags index="SuppressMoving" value="1"/>
            <ModifyFlags index="SuppressTurning" value="1"/>
            <StateFlags index="Silence" value="1"/>
            <StateFlags index="SuppressAttack" value="1"/>
        </Modification>
    </CBehaviorBuff>

    <CEffectCreatePersistent id="ScrinProdigyTeleportUnitsExecute">
        <InitialEffect value="RATimeAndSpaceTeleportationSearchRangeEffectCollection"/>
        <PeriodCount value="1"/>
        <PeriodicPeriodArray value="0.1"/>
        <RevealRadius value="6"/>
        <RevealFlags index="Unfog" value="1"/>
    </CEffectCreatePersistent>
    <CEffectSet id="RATimeAndSpaceTeleportationSearchRangeEffectCollection">
        <EffectArray value="ChronoSprer"/>
        <EffectArray value="RATeleportToSearchForOwnUnits"/>
<!--        <EffectArray value="RATeleportToSearchForZombieUnits"/>-->
        <EffectArray value="RATimeTeleportationSearchForZombieUnitsInTheWholeMapIsStill"/>
        <TargetLocationType value="Unknown"/>
    </CEffectSet>
    <CEffectSet id="ChronoSprer">
        <EditorCategories value="Race:Terran"/>
        <TargetLocationType value="Unknown"/>
        <EffectArray value="Auchrono2"/>
    </CEffectSet>
    <CEffectCreateUnit id="Auchrono2">
        <WhichLocation Value="TargetPoint"/>
        <SpawnUnit value="ScrinProdigyTeleportUnitsCoverUnit"/>
    </CEffectCreateUnit>


    <CEffectEnumArea id="RATeleportToSearchForOwnUnits">
        <LaunchLocation Value="TargetPoint"/>
        <ImpactLocation Value="CasterPoint"/>
        <SearchFilters value="Ground;Neutral,Air,Structure"/>
        <AreaArray Radius="2" Effect="AlliedChronoSTemp"/>
    </CEffectEnumArea>
    <CEffectTeleport id="AlliedChronoSTemp">
        <PlacementAround Effect="RATeleportToSearchForOwnUnits"/>
        <TargetLocation Effect="RATeleportToSearchForOwnUnits" Value="TargetPoint"/>
        <PlacementRange value="2"/>
        <SourceLocation Effect="RATeleportToSearchForOwnUnits" Value="CasterPoint"/>
        <TeleportFlags index="TestFog" value="0"/>
    </CEffectTeleport>


    <CUnit id="ScrinProdigyTeleportUnitsCoverUnit">
        <Race value="Allied"/>
        <FlagArray index="Undetectable" value="1"/>
        <FlagArray index="Invulnerable" value="1"/>
        <FlagArray index="ClearRallyOnTargetLost" value="0"/>
        <Sight value="4"/>
        <AbilArray Link="ScrinProdigyTeleportUnitsExecute"/>
        <BehaviorArray Link="ScrinProdigyTeleportUnitsCoverUnitTimedLife"/>
        <CardLayouts>
            <LayoutButtons Face="ScrinProdigyTeleportUnitsExecute" Type="AbilCmd" AbilCmd="ScrinProdigyTeleportUnitsExecute,Execute" Row="0" Column="0"/>
            <LayoutButtons Face="Cancel" Type="AbilCmd" AbilCmd="ScrinProdigyTeleportUnitsExecute,Cancel" Row="2" Column="4"/>
        </CardLayouts>
        <EditorCategories value="ObjectType:Other,ObjectFamily:Melee"/>
    </CUnit>
    <CActorUnit id="ScrinProdigyTeleportUnitsCoverUnit" parent="GenericUnitStandard" unitName="ScrinProdigyTeleportUnitsCoverUnit">
        <Scale value="0.35"/>
        <HighlightTooltip value="Unit/Name/Bogus"/>
        <On Terms="ActorCreation" Send="AnimBracketStart Brith Stand"/>
    </CActorUnit>
    <CModel id="ScrinProdigyTeleportUnitsCoverUnit" Race="Neutral">
        <Model value="Assets\Effects\Protoss\TimeBomb\TimeBomb.m3"/>
        <EditorCategories value="Race:Neutral"/>
        <Flags index="TeenSafe" value="1"/>
        <SelectionRadius value="1.000000"/>
        <ShadowRadius value="0.000000"/>
    </CModel>
    <CBehaviorBuff id="ScrinProdigyTeleportUnitsCoverUnitTimedLife" parent="TimedLife">
        <InfoIcon value="Assets\Textures\btn-ability-zerg-explode.dds"/>
        <EditorCategories value="Race:Zerg,AbilityorEffectType:Units"/>
        <Duration value="1.5"/>
    </CBehaviorBuff>

    <CEffectSet id="ScrinProdigyTeleportUnits">
        <TargetLocationType value="Point"/>
    </CEffectSet>
    <CEffectSet id="ScrinProdigyTeleportUnitsTargeting">
        <TargetLocationType value="Point"/>
    </CEffectSet>


</Catalog>