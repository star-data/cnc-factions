<Catalog>

    <CAbilMove id="ScrinMehapedeSegmentMove">
        <EditorCategories value="AbilityorEffectType:Units"/>
        <FollowRangeSlop value="0.01"/>
        <FollowAcquireRange value="500"/>
    </CAbilMove>
    <CUnit default="1" id="ScrinMechapedeSegment">
        <LifeStart value="125"/>
        <LifeMax value="125"/>
        <Speed value="3.65"/>
        <FlagArray index="Turnable" value="1"/>
        <FlagArray index="Movable" value="1"/>
        <FlagArray index="Unclickable" value="1"/>
        <FlagArray index="Uncommandable" value="1"/>
        <FlagArray index="Unhighlightable" value="1"/>
        <FlagArray index="Untooltipable" value="1"/>
        <FlagArray index="PreventDestroy" value="1"/>
        <FlagArray index="UseLineOfSight" value="1"/>
        <FlagArray index="KillCredit" value="1"/>
        <FlagArray index="ShowResources" value="1"/>
        <FlagArray index="ClearRallyOnTargetLost" value="1"/>
        <FlagArray index="ArmySelect" value="1"/>
        <FlagArray index="PlayerRevivable" value="1"/>
        <FlagArray index="CameraFollow" value="1"/>
        <BehaviorArray Link="ScrinMechapedeSegmentFollow"/>
        <Name value="Unit/Name/##id##"/>
        <Description value="Button/Tooltip/##id##"/>
        <DeathRevealFilters value="Visible;Player,Ally,Neutral,Missile,Dead,Hidden"/>
        <DeathRevealRadius value="3"/>
        <DeathRevealDuration value="4"/>
        <DeathRevealType value="Snapshot"/>
        <ReviveType value="##id##"/>
        <Race value="Scrin"/>
        <Mob value="Multiplayer"/>
        <ResourceState value="Unknown"/>
        <ResourceType value="Unknown"/>
        <EditorFlags index="BlockStructures" value="1"/>
        <PlaneArray index="Ground" value="1"/>
        <PushPriority value="10"/>
        <Collide index="Ground" value="1"/>
        <Collide index="ForceField" value="1"/>
        <Collide index="Locust" value="1"/>
        <Collide index="Small" value="1"/>
        <DefaultAcquireLevel value="Offensive"/>
        <Response value="Acquire"/>
        <Attributes index="Mechanical" value="1"/>
        <ArmorType value="Unknown"/>
        <LifeArmorName value="Unit/LifeArmorName/ScrinVehiclesArmor"/>
        <Mover value="Ground"/>
        <Acceleration value="1000"/>
        <Deceleration value="1000"/>
        <StationaryTurningRate value="990"/>
        <TurningRate value="990"/>
        <Sight value="9"/>
        <OccludeHeight value="0.75"/>
        <CostCategory value="Army"/>
        <PawnItemReduction value="1"/>
        <RepairTime value="8"/>
        <AttackTargetPriority value="20"/>
        <DamageDealtXP value="1"/>
        <DamageTakenXP value="1"/>
        <AbilArray Link="ScrinMehapedeSegmentMove"/>
        <AbilArray Link="stop"/>
        <AbilArray Link="attack"/>
<!--        <AbilArray Link="ScrinHostUncombine"/>-->
        <BehaviorArray Link="ScrinMechapedeHeadTracker"/>
        <CardLayouts>
            <LayoutButtons Face="Move" Type="AbilCmd" AbilCmd="ScrinMehapedeSegmentMove,Move" Row="0" Column="0"/>
            <LayoutButtons Face="Stop" Type="AbilCmd" AbilCmd="stop,Stop" Row="0" Column="1"/>
<!--            <LayoutButtons Face="MoveHoldPosition" Type="AbilCmd" AbilCmd="move,HoldPos" Row="0" Column="2"/>-->
<!--            <LayoutButtons Face="MovePatrol" Type="AbilCmd" AbilCmd="move,Patrol" Row="0" Column="3"/>-->
            <LayoutButtons Face="Attack" Type="AbilCmd" AbilCmd="attack,Execute" Row="0" Column="4"/>
        </CardLayouts>
        <Radius value="0.35"/>
        <SeparationRadius value="0.35"/>
        <InnerRadius value="0.35"/>
        <InnerRadiusSafetyMultiplier value="1"/>
        <CargoSize value="1"/>
        <ScoreMakeCostFactor index="Minerals" value="1"/>
        <ScoreMakeCostFactor index="Vespene" value="1"/>
        <ScoreKillCostFactor index="Minerals" value="1"/>
        <ScoreKillCostFactor index="Vespene" value="1"/>
        <ScoreResult value="BuildOrder"/>
        <SubgroupPriority value="15"/>
        <MinimapRadius value="0.5"/>
        <EditorCategories value="ObjectType:Unit,ObjectFamily:CNC"/>
        <TacticalAI value="##id##"/>
        <TacticalAIFilters value="-;Player,Ally,Neutral"/>
        <AIEvalFactor value="1"/>
        <Mass value="0.4"/>
        <LeaderAlias value="##id##"/>
        <HotkeyAlias value="##id##"/>
        <SelectAlias value="##id##"/>
        <SubgroupAlias value="##id##"/>
        <GlossaryCategory value="Unit/Category/ScrinUnits"/>
        <GlossaryAlias value="##id##"/>
        <HotkeyCategory value="Unit/Category/ScrinUnits"/>
        <AIEvaluateAlias value="##id##"/>
        <Fidget>
            <DelayMax value="30"/>
            <DelayMin value="10"/>
            <DistanceMax value="4"/>
            <DistanceMin value="1"/>
            <TurnAngle value="90"/>
            <TurningRate value="90"/>
            <ChanceArray index="Anim" value="33"/>
            <ChanceArray index="Idle" value="33"/>
            <ChanceArray index="Turn" value="33"/>
        </Fidget>
        <ReviveInfoBase>
            <Charge Link="##id##/Revive" Location="Unit"/>
            <Cooldown Link="##id##/Revive" Location="Unit"/>
        </ReviveInfoBase>
<!--        <PushPriority value="9999"/>-->
    </CUnit>

    <CUnit id="ScrinMechapede" parent="ScrinGround">
        <SubgroupPriority value="10"/>
        <LifeStart value="200"/>
        <LifeMax value="200"/>
        <LifeArmor value="1"/>
        <Speed value="3.65"/>
        <Food value="4"/>
        <CostResource index="Minerals" value="125"/>
        <CostResource index="Vespene" value="50"/>
        <BehaviorArray Link="Detector"/>
        <AbilArray Link="ScrinMechapedeSegmentTrain"/>
        <AbilArray Link="que5PassiveCancelToSelection"/>
        <GlossaryPriority value="125"/>
        <BehaviorArray Link="ScrinMechapedeSegmentsTracker"/>
        <CardLayouts index="0">
            <LayoutButtons Face="ScrinMechapedeShardSegment" Type="AbilCmd" AbilCmd="ScrinMechapedeSegmentTrain,Train1" Row="2" Column="0"/>
            <LayoutButtons Face="ScrinMechapedeToxinSegment" Type="AbilCmd" AbilCmd="ScrinMechapedeSegmentTrain,Train2" Row="2" Column="1"/>
            <LayoutButtons Face="ScrinMechapedeDisintegratorSegment" Type="AbilCmd" AbilCmd="ScrinMechapedeSegmentTrain,Train3" Row="2" Column="2"/>
            <LayoutButtons Face="ScrinMechapedeDiscSegment" Type="AbilCmd" AbilCmd="ScrinMechapedeSegmentTrain,Train4" Row="2" Column="3"/>
            <LayoutButtons Face="Cancel" Type="AbilCmd" AbilCmd="que5PassiveCancelToSelection,CancelLast" Row="2" Column="4"/>
        </CardLayouts>
        <Attributes index="Mechanical" value="1"/>
        <Sight value="9"/>
        <Radius value="0.3"/>
        <SeparationRadius value="0.3"/>
        <InnerRadius value="0.3"/>
        <CargoSize value="2"/>
    </CUnit>
    <CUnit id="ScrinMechapedeDisintegratorSegment" parent="ScrinMechapedeSegment">
<!--        <WeaponArray Link="ScrinMechapedeDisentegrator" Turret="SiegeTank"/>-->
        <GlossaryCategory value=""/>
        <HotkeyCategory value=""/>
    </CUnit>
    <CUnit id="ScrinMechapedeShardSegment" parent="ScrinMechapedeSegment">
<!--        <WeaponArray Link="ScrinMechapedeShards" Turret="SiegeTank"/>-->
        <GlossaryCategory value=""/>
        <HotkeyCategory value=""/>
    </CUnit>
    <CUnit id="ScrinMechapedeToxinSegment" parent="ScrinMechapedeSegment">
<!--        <WeaponArray Link="ScrinMechapedeToxins" Turret="SiegeTank"/>-->
<!--        <WeaponArray Link="NodTiberiumTrooperDeathSpray"/>-->
        <GlossaryCategory value=""/>
        <HotkeyCategory value=""/>
    </CUnit>
    <CUnit id="ScrinMechapedeDiscSegment" parent="ScrinMechapedeSegment">
<!--        <WeaponArray Link="ScrinMechapedeDiscs" Turret="SiegeTank"/>-->
<!--        <WeaponArray Link="ScrinPlasmaDiscs3"/>-->
        <GlossaryCategory value=""/>
        <HotkeyCategory value=""/>
    </CUnit>






    <CModel id="ScrinMechapedeDisintegratorSegmentTurret" model="Scrin_MillipedeTurret_Disintegrator" parent="ScrinVehicle">
        <ScaleMax value="0.8,0.8,0.8"/><ScaleMin value="0.8,0.8,0.8"/>
    </CModel>
    <CModel id="ScrinMechapedeDiscSegmentTurret" model="Scrin_MillipedeTurret_Disk" parent="ScrinVehicle">
        <ScaleMax value="0.8,0.8,0.8"/><ScaleMin value="0.8,0.8,0.8"/>
    </CModel>
    <CModel id="ScrinMechapedeShardSegmentTurret" model="Scrin_MillipedeTurret_Shard" parent="ScrinVehicle">
        <ScaleMax value="0.8,0.8,0.8"/><ScaleMin value="0.8,0.8,0.8"/>
    </CModel>
    <CModel id="ScrinMechapedeToxinSegmentTurret" model="Scrin_MillipedeTurret_Toxin" parent="ScrinVehicle">
        <ScaleMax value="0.8,0.8,0.8"/><ScaleMin value="0.8,0.8,0.8"/>
    </CModel>

    <CActorUnit id="ScrinMechapede" parent="ScrinWalker" icon="mechapede">
        <Model value="ScrinMechapedeHead"/>
        <WalkAnimMoveSpeed value="4"/>
    </CActorUnit>
    <CActorUnit id="ScrinMechapedeSegment" parent="ScrinWalker" icon="mechapede" default="1">
        <WalkAnimMoveSpeed value="4"/>
        <Model value="ScrinMechapedeBody"/>
<!--        <On Terms="ActorCreation" Send="AnimPlay CoverA Cover,A PlayForever 0.000000"/>-->
<!--        <On Terms="ActorCreation" Send="AnimPlay CoverB Cover,B PlayForever 0.000000"/>-->
<!--        <On Terms="ActorCreation" Send="AnimPlay CoverC Cover,C PlayForever 0.000000"/>-->
<!--        <On Terms="ActorCreation" Send="AnimPlay CoverD Cover,D PlayForever 0.000000"/>-->
        <On Terms="ActorCreation" Send="AnimPlay CoverE Cover,E PlayForever 0.000000"/>
    </CActorUnit>
    <CActorUnit id="ScrinMechapedeDisintegratorSegment" parent="ScrinMechapedeSegment"/>
    <CActorUnit id="ScrinMechapedeDiscSegment" parent="ScrinMechapedeSegment"/>
    <CActorUnit id="ScrinMechapedeShardSegment" parent="ScrinMechapedeSegment"/>
    <CActorUnit id="ScrinMechapedeToxinSegment" parent="ScrinMechapedeSegment"/>


    <CActorUnit id="ScrinMechapedeDisintegratorSegmentTurret" parent="ScrinWalker" icon="mechapede"/>
    <CActorUnit id="ScrinMechapedeDiscSegmentTurret" parent="ScrinWalker" icon="mechapede"/>
    <CActorUnit id="ScrinMechapedeShardSegmentTurret" parent="ScrinWalker" icon="mechapede"/>
    <CActorUnit id="ScrinMechapedeToxinSegmentTurret" parent="ScrinWalker" icon="mechapede"/>



    <CUnit id="ScrinMechapedeSegmentTurret" default="1">
        <FlagArray index="Turnable" value="1"/>
        <FlagArray index="Movable" value="1"/>
        <FlagArray index="Unclickable" value="1"/>
        <FlagArray index="Uncommandable" value="1"/>
        <FlagArray index="Unhighlightable" value="1"/>
        <FlagArray index="Untooltipable" value="1"/>
        <FlagArray index="Invulnerable" value="1"/>
        <FlagArray index="Unselectable" value="1"/>
        <FlagArray index="PreventDestroy" value="0"/>
        <FlagArray index="UseLineOfSight" value="0"/>
        <AbilArray Link="stop"/>
        <AbilArray Link="attack"/>
        <CardLayouts>
            <LayoutButtons Face="Stop" Type="AbilCmd" AbilCmd="stop,Stop" Row="0" Column="1"/>
            <LayoutButtons Face="Attack" Type="AbilCmd" AbilCmd="attack,Execute" Row="0" Column="4"/>
        </CardLayouts>
    </CUnit>
    <CUnit id="ScrinMechapedeDisintegratorSegmentTurret" parent="ScrinMechapedeSegmentTurret">
        <WeaponArray Link="ScrinMechapedeDisentegrator" Turret="SiegeTank"/>
        <GlossaryCategory value=""/>
        <HotkeyCategory value=""/>
    </CUnit>
    <CUnit id="ScrinMechapedeShardSegmentTurret" parent="ScrinMechapedeSegmentTurret">
        <WeaponArray Link="ScrinMechapedeShards" Turret="SiegeTank"/>
        <GlossaryCategory value=""/>
        <HotkeyCategory value=""/>
    </CUnit>
    <CUnit id="ScrinMechapedeToxinSegmentTurret" parent="ScrinMechapedeSegmentTurret">
        <WeaponArray Link="ScrinMechapedeToxins" Turret="SiegeTank"/>
        <!--        <WeaponArray Link="NodTiberiumTrooperDeathSpray"/>-->
        <GlossaryCategory value=""/>
        <HotkeyCategory value=""/>
    </CUnit>
    <CUnit id="ScrinMechapedeDiscSegmentTurret" parent="ScrinMechapedeSegmentTurret">
        <WeaponArray Link="ScrinMechapedeDiscs" Turret="SiegeTank"/>
        <!--        <WeaponArray Link="ScrinPlasmaDiscs3"/>-->
        <GlossaryCategory value=""/>
        <HotkeyCategory value=""/>
    </CUnit>


    <CWeaponLegacy parent="ScrinWeapon" id="ScrinMechapedeWeapon">
        <TargetFilters value="Visible,Ground;Missile,Stasis,Dead,Hidden,Invulnerable"/>
        <Range value="8"/>
        <Period value="1.85"/>
        <Options index="OnlyFireWhileInAttackOrder" value="0"/>
        <Options index="OnlyFireAtAttackOrderTarget" value="0"/>
        <Options index="LinkedCooldown" value="0"/>
        <DamagePoint value="0"/>
        <Backswing value="0"/>
        <RandomDelayMin value="0"/>
        <RandomDelayMax value="0"/>
        <LegacyOptions index="NoDeceleration" value="1"/>
        <AllowedMovement value="Moving"/>
    </CWeaponLegacy>
    <CWeaponLegacy parent="ScrinMechapedeWeapon" id="ScrinMechapedeDisentegrator">
        <TargetFilters value="Ground,Visible;Missile,Stasis,Dead,Hidden,Invulnerable"/>
        <Period value="2"/>
        <DamagePoint value="0.25"/>
        <Backswing value="0.75"/>
        <Effect value="ScrinDisintegratorWeaponDamage"/>
        <Range value="4"/>
    </CWeaponLegacy>
    <CWeaponLegacy parent="ScrinMechapedeWeapon" id="ScrinMechapedeShards">
        <TargetFilters value="Visible,Ground;Missile,Stasis,Dead,Hidden,Invulnerable"/>
        <Effect value="NodTiberiumGunLM"/>
<!--        <Effect value="##id##CP"/>-->
        <Range value="7"/>
        <Period value="1.85"/>
    </CWeaponLegacy>
    <CWeaponLegacy parent="ScrinMechapedeWeapon" id="ScrinMechapedeToxins">
        <DisplayEffect value="NodTiberiumTrooperDeathSprayDamage"/>
        <TargetFilters value="Ground;Self,Dead,Invulnerable"/>
        <Range value="7"/>
        <Period value="0.5"/>
        <Effect value="NodTiberiumTrooperDeathSprayEffectCollection"/>
    </CWeaponLegacy>
    <CWeaponLegacy parent="ScrinMechapedeWeapon" id="ScrinMechapedeDiscs">
        <DisplayEffect value="ScrinPlasmaDiscsDamage"/>
        <DisplayAttackCount value="3"/>
        <TargetFilters value="Visible;Missile,Stasis,Dead,Hidden,Invulnerable"/>
        <Range value="9"/>
        <RangeSlop value="0"/>
        <Period value="3.25"/>
        <Effect value="ScrinPlasmaDiscsCP3"/>
    </CWeaponLegacy>








    <CAbilTrain id="ScrinMechapedeSegmentTrain">
        <EditorCategories value="Race:Scrin,AbilityorEffectType:Units"/>
        <Range value="5"/>
        <Activity value="UI/Training"/>
        <InfoArray index="Train1" Time="3">
            <Button DefaultButtonFace="ScrinMechapedeShardSegment" Requirements="ScrinMechapedeSpawnSegment"/>
            <Unit value="ScrinMechapedeShardSegment"/>
        </InfoArray>
        <InfoArray index="Train2" Time="3">
            <Button DefaultButtonFace="ScrinMechapedeToxinSegment" Requirements="ScrinMechapedeSpawnSegment"/>
            <Unit value="ScrinMechapedeToxinSegment"/>
        </InfoArray>
        <InfoArray index="Train3" Time="3">
            <Button DefaultButtonFace="ScrinMechapedeDisintegratorSegment" Requirements="ScrinMechapedeSpawnSegment"/>
            <Unit value="ScrinMechapedeDisintegratorSegment"/>
        </InfoArray>
        <InfoArray index="Train4" Time="3">
            <Button DefaultButtonFace="ScrinMechapedeDiscSegment" Requirements="ScrinMechapedeSpawnSegment"/>
            <Unit value="ScrinMechapedeDiscSegment"/>
        </InfoArray>
<!--        <EffectArray index="Start" value="ScrinMechapedeSegmentBuildSet"/>-->
    </CAbilTrain>

    <CEffectSet id="ScrinMechapedeSegmentBuildSet">
        <EffectArray value="ScrinMechapedeSegmentSuicideWithCaster"/>
        <EffectArray value="KillsToCaster"/>
        <!--        <EffectArray value="MakePrecursor"/>-->
        <!--        <EffectArray value="NodTurretsHubBuildLaunchMissile"/>-->
        <EditorCategories value="Race:Nod"/>
    </CEffectSet>
    <CEffectApplyBehavior id="ScrinMechapedeSegmentSuicideWithCaster">
        <ValidatorArray index="0" value=""/>
        <EditorCategories value="Race:Nod"/>
    </CEffectApplyBehavior>
    <CBehaviorBuff id="ScrinMechapedeSegmentSuicideWithCaster">
        <RemoveValidatorArray value="CasterNotDead"/>
        <FinalEffect value="Kill"/>
        <InfoFlags index="Hidden" value="1"/>
        <EditorCategories value="Race:Nod,AbilityorEffectType:Units"/>
    </CBehaviorBuff>

    <CBehaviorUnitTracker id="ScrinMechapedeSegmentsTracker">
        <InfoFlags index="Hidden" value="1"/>
    </CBehaviorUnitTracker>
    <CBehaviorUnitTracker id="ScrinMechapedeHeadTracker">
        <InfoFlags index="Hidden" value="1"/>
    </CBehaviorUnitTracker>
    <CEffectAddTrackedUnit id="ScrinMechapedeSegmentsTrackerATU">
        <BehaviorLink value="ScrinMechapedeSegmentsTracker"/>
        <TrackedUnit Value="Target"/>
    </CEffectAddTrackedUnit>
    <CEffectAddTrackedUnit id="ScrinMechapedeHeadTrackerATU">
        <BehaviorLink value="ScrinMechapedeHeadTracker"/>
        <TrackerUnit Value="Target"/>
    </CEffectAddTrackedUnit>



    <!-- Mechapede Segment Spawn Abilities -->
<!--    <CAbilEffectInstant id="ScrinMechapedeSpawnShardSegment">-->
<!--        <EditorCategories value="Race:Scrin,AbilityorEffectType:Units"/>-->
<!--        <Effect index="0" value="ScrinMechapedeSpawnShardSegmentSet"/>-->
<!--        &lt;!&ndash; <ValidatorArray value="ScrinMechapedeSegmentLimitNotReached"/> &ndash;&gt;-->
<!--        <Cost>-->
<!--            <Resource index="Minerals" value="25"/>-->
<!--        </Cost>-->
<!--        <CmdButtonArray index="Execute" DefaultButtonFace="ScrinMechapedeShardSegment"/>-->
<!--    </CAbilEffectInstant>-->
<!--    <CAbilEffectInstant id="ScrinMechapedeSpawnToxinSegment">-->
<!--        <EditorCategories value="Race:Scrin,AbilityorEffectType:Units"/>-->
<!--        <Effect index="0" value="ScrinMechapedeSpawnToxinSegmentSet"/>-->
<!--        &lt;!&ndash; <ValidatorArray value="ScrinMechapedeSegmentLimitNotReached"/> &ndash;&gt;-->
<!--        <Cost>-->
<!--            <Resource index="Minerals" value="25"/>-->
<!--        </Cost>-->
<!--        <CmdButtonArray index="Execute" DefaultButtonFace="ScrinMechapedeToxinSegment"/>-->
<!--    </CAbilEffectInstant>-->
<!--    <CAbilEffectInstant id="ScrinMechapedeSpawnDisintegratorSegment">-->
<!--        <EditorCategories value="Race:Scrin,AbilityorEffectType:Units"/>-->
<!--        <Effect index="0" value="ScrinMechapedeSpawnDisintegratorSegmentSet"/>-->
<!--        &lt;!&ndash; <ValidatorArray value="ScrinMechapedeSegmentLimitNotReached"/> &ndash;&gt;-->
<!--        <Cost>-->
<!--            <Resource index="Minerals" value="25"/>-->
<!--        </Cost>-->
<!--        <CmdButtonArray index="Execute" DefaultButtonFace="ScrinMechapedeDisintegratorSegment"/>-->
<!--    </CAbilEffectInstant>-->
<!--    <CAbilEffectInstant id="ScrinMechapedeSpawnDiscSegment">-->
<!--        <EditorCategories value="Race:Scrin,AbilityorEffectType:Units"/>-->
<!--        <Effect index="0" value="ScrinMechapedeSpawnDiscSegmentSet"/>-->
<!--        &lt;!&ndash; <ValidatorArray value="ScrinMechapedeSegmentLimitNotReached"/> &ndash;&gt;-->
<!--        <Cost>-->
<!--            <Resource index="Minerals" value="25"/>-->
<!--        </Cost>-->
<!--        <CmdButtonArray index="Execute" DefaultButtonFace="ScrinMechapedeDiscSegment"/>-->
<!--    </CAbilEffectInstant>-->
<!--    -->

    <!-- Mechapede Segment Spawn Effects -->
    <CEffectSet id="ScrinMechapedeSpawnShardSegmentSet">
        <EffectArray value="ScrinMechapedeSpawnShardSegmentCreate"/>
        <EffectArray value="ScrinMechapedeApplySegmentTracker"/>
    </CEffectSet>
    <CEffectCreateUnit id="ScrinMechapedeSpawnShardSegmentCreate">
        <WhichLocation Value="CasterUnit"/>
        <SpawnUnit value="ScrinMechapedeShardSegment"/>
        <SpawnOwner Value="Caster"/>
        <SpawnOffset value="0,-1,0"/>
        <CreateFlags index="PlacementIgnoreBlockers" value="1"/>
        <SpawnEffect value="ScrinMechapedeSegmentApplyBehaviors"/>
    </CEffectCreateUnit>

    <CEffectSet id="ScrinMechapedeSpawnToxinSegmentSet">
        <EffectArray value="ScrinMechapedeSpawnToxinSegmentCreate"/>
        <EffectArray value="ScrinMechapedeApplySegmentTracker"/>
    </CEffectSet>
    <CEffectCreateUnit id="ScrinMechapedeSpawnToxinSegmentCreate">
        <WhichLocation Value="CasterUnit"/>
        <SpawnUnit value="ScrinMechapedeToxinSegment"/>
        <SpawnOwner Value="Caster"/>
        <SpawnOffset value="0,-1,0"/>
        <CreateFlags index="PlacementIgnoreBlockers" value="1"/>
        <SpawnEffect value="ScrinMechapedeSegmentApplyBehaviors"/>
    </CEffectCreateUnit>

    <CEffectSet id="ScrinMechapedeSpawnDisintegratorSegmentSet">
        <EffectArray value="ScrinMechapedeSpawnDisintegratorSegmentCreate"/>
        <EffectArray value="ScrinMechapedeApplySegmentTracker"/>
    </CEffectSet>
    <CEffectCreateUnit id="ScrinMechapedeSpawnDisintegratorSegmentCreate">
        <WhichLocation Value="CasterUnit"/>
        <SpawnUnit value="ScrinMechapedeDisintegratorSegment"/>
        <SpawnOwner Value="Caster"/>
        <SpawnOffset value="0,-1,0"/>
        <CreateFlags index="PlacementIgnoreBlockers" value="1"/>
        <SpawnEffect value="ScrinMechapedeSegmentApplyBehaviors"/>
    </CEffectCreateUnit>

    <CEffectSet id="ScrinMechapedeSpawnDiscSegmentSet">
        <EffectArray value="ScrinMechapedeSpawnDiscSegmentCreate"/>
        <EffectArray value="ScrinMechapedeApplySegmentTracker"/>
    </CEffectSet>
    <CEffectCreateUnit id="ScrinMechapedeSpawnDiscSegmentCreate">
        <WhichLocation Value="CasterUnit"/>
        <SpawnUnit value="ScrinMechapedeDiscSegment"/>
        <SpawnOwner Value="Caster"/>
        <SpawnOffset value="0,-1,0"/>
        <CreateFlags index="PlacementIgnoreBlockers" value="1"/>
        <SpawnEffect value="ScrinMechapedeSegmentApplyBehaviors"/>
    </CEffectCreateUnit>

    <!-- Apply both link and follow behaviors to spawned segments -->
    <CEffectSet id="ScrinMechapedeSegmentApplyBehaviors">
        <EffectArray value="ScrinMechapedeSegmentLinkToHead"/>
        <EffectArray value="ScrinMechapedeSegmentApplyFollow"/>
    </CEffectSet>

    <CEffectApplyBehavior id="ScrinMechapedeSegmentApplyFollow">
        <WhichUnit Value="Source"/>
        <Behavior value="ScrinMechapedeSegmentFollow"/>
    </CEffectApplyBehavior>

    <!-- Segment tracking effects -->
    <CEffectApplyBehavior id="ScrinMechapedeApplySegmentTracker">
        <WhichUnit Value="Caster"/>
        <Behavior value="ScrinMechapedeSegmentTracker"/>
    </CEffectApplyBehavior>

    <CEffectApplyBehavior id="ScrinMechapedeSegmentLinkToHead">
        <WhichUnit Value="Source"/>
        <Behavior value="ScrinMechapedeSegmentLinked"/>
    </CEffectApplyBehavior>


    <!-- Segment following effects - searches for head unit and follows it -->
    <CEffectEnumArea id="ScrinMechapedeSegmentFollowSearch">
        <SearchFilters value="Player,Ally,Neutral;Missile,Stasis,Dead,Hidden,Invulnerable"/>
        <AreaArray Radius="50" Effect="ScrinMechapedeSegmentFollowOrder"/>
        <MaxCount value="1"/>
    </CEffectEnumArea>

    <CEffectIssueOrder id="ScrinMechapedeSegmentFollowOrder">
        <Abil value="move"/>
        <Target Effect="ScrinMechapedeSegmentFollowOrder" Value="TargetUnit"/>
        <WhichUnit Effect="ScrinMechapedeSegmentFollowSearch"/>
        <ValidatorArray value="ScrinMechapedeIsHeadUnit"/>
    </CEffectIssueOrder>


    <!-- Orphaned segment death effect -->
    <CEffectDamage id="ScrinMechapedeSegmentOrphanedDeath">
        <Amount value="9999"/>
        <Kind value="Spell"/>
    </CEffectDamage>



    <!-- Mechapede Segment Tracking Behaviors -->

    <!-- This behavior tracks segments attached to the head (max 8) -->
    <CBehaviorBuff id="ScrinMechapedeSegmentTracker">
        <EditorCategories value="Race:Scrin"/>
        <MaxStackCount value="8"/>
        <InfoFlags index="Hidden" value="1"/>
        <Duration value="-1"/>
    </CBehaviorBuff>

    <!-- This behavior is applied to segments to link them to the head -->
    <CBehaviorBuff id="ScrinMechapedeSegmentLinked">
        <EditorCategories value="Race:Scrin"/>
        <InfoFlags index="Hidden" value="1"/>
        <Duration value="-1"/>
    </CBehaviorBuff>


    <!-- Periodic behavior that makes segments follow the head unit -->
    <CBehaviorBuff id="ScrinMechapedeSegmentFollow">
        <EditorCategories value="Race:Scrin"/>
        <InfoFlags index="Hidden" value="1"/>
        <Period value="0.5"/>
        <PeriodicEffect value="ScrinMechapedeSegmentFollowSearch"/>
        <Duration value="-1"/>
        <Alignment value="Positive"/>
    </CBehaviorBuff>


    <!-- Timed life for orphaned segments (when previous segment dies) -->
    <CBehaviorBuff id="ScrinMechapedeSegmentOrphaned">
        <EditorCategories value="Race:Scrin"/>
        <Duration value="10"/>
        <ExpireEffect value="ScrinMechapedeSegmentOrphanedDeath"/>
        <Modification>
            <StateFlags index="Uncommandable" value="0"/>
        </Modification>
    </CBehaviorBuff>



</Catalog>