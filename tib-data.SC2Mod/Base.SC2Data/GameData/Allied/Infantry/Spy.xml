<Catalog>
<!--
TODO:
    Spy Disguise Ability
    create a duplicate of target unit (similar to replicant)
    change opacity of Spy actor to 0
    make camo unit unselectable.
    add kinetic to camo unit
-->
    <CUnit id="AlliedSpy" parent="AlliedInfantry">
        <FlagArray index="AIPressForwardDisabled" value="1"/>
        <LifeStart value="75"/>
        <LifeMax value="75"/>
        <LifeArmorName value="Unit/LifeArmorName/TerranInfantryArmor"/>
        <Speed value="1.5"/>
        <Food value="-2"/>
        <CostResource index="Minerals" value="25"/>
        <CostResource index="Vespene" value="75"/>
        <KillXP value="1"/>
        <AbilArray Link="AlliedSpyBribery"/>
        <AbilArray Link="AlliedSpyInfiltrate"/>
        <AbilArray Link="AlliedSpyDisguise"/>
        <AbilArray Link="AlliedSpyDisguiseCancel"/>
        <CardLayouts index="0">
            <LayoutButtons Face="AlliedSpyInfiltrate" Type="AbilCmd" AbilCmd="AlliedSpyInfiltrate,Execute" Row="2" Column="0"/>
            <LayoutButtons Face="AlliedSpyBribery" Type="AbilCmd" AbilCmd="AlliedSpyBribery,Execute" Row="2" Column="1"/>
            <LayoutButtons Face="AlliedSpyDisguise" Type="AbilCmd" AbilCmd="AlliedSpyDisguise,Execute" Row="2" Column="2"/>
            <LayoutButtons Face="Cancel" Type="AbilCmd" AbilCmd="AlliedSpyDisguiseCancel,Execute" Row="2" Column="4"/>
        </CardLayouts>
        <Radius value="0.375"/>
        <SeparationRadius value="0.375"/>
        <SubgroupPriority value="12"/>
        <GlossaryPriority value="50"/>
        <TacticalAI value="GhostCloaked"/>
        <AIEvaluateAlias value="Ghost"/>
    </CUnit>
    <CAbilEffectTarget id="AlliedSpyInfiltrate">
        <EditorCategories value="AbilityorEffectType:Units,Race:Terran"/>
        <Effect index="0" value="EngineerCaptureSet4"/>
        <Flags index="Smart" value="1"/>
        <TargetFilters value="Ground,Structure;Player,Ally,Neutral,User1,Stasis,Invulnerable,MapBoss"/>
        <Range value="0"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="AlliedSpyInfiltrate"/>
    </CAbilEffectTarget>
    <CAbilEffectInstant id="AlliedSpyBribery">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <InfoTooltipPriority value="3"/>
        <Effect index="0" value="AlliedSpyBriberyEA"/>
        <Flags index="BestUnit" value="1"/>
        <Cost>
            <Resource index="Minerals" value="150"/>
            <Display index="Minerals" value="1"/>
            <Charge Link=""/>
            <Cooldown Link="Abil/AlarakSingularity" TimeUse="10"/>
        </Cost>
        <PrepTime value="3"/>
        <ShowProgressArray index="Prep" value="1"/>
        <UninterruptibleArray index="Prep" value="1"/>
        <AINotifyEffect value="AlliedSpyBriberyEA"/>
        <ProgressButtonArray index="Prep" value="AlliedSpyBribery"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="AlliedSpyBribery">
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <PrepEffect value="RASpyUnmaskingInitialDelay"/>
    </CAbilEffectInstant>
    <CActorUnit id="AlliedSpy" parent="AlliedInfantry" unitName="AlliedSpy" icon="Spy">
        <Aliases value="_UnitSmall"/>
        <Macros value="UnloadDropAnim"/>
        <AcceptedHostedPropTransfers index="CastShadows" value="0"/>
        <On Terms="Abil.AlliedSpyBribery.SourcePrepStart" Send="AnimBracketStart 111 {} Spell {} ContentNonLooping,ContentPlayOnce,Instant"/>
        <On Terms="Abil.AlliedSpyBribery.SourceFinishStart" Send="AnimBracketStop 111"/>
        <Model value="AlliedSpy"/>
        <AnimBlendTime value="-0.800000"/>
        <ModelFlags index="OutlineEmitter" value="1"/>
        <EventDataFootprint index="0" Actor="UnitFootprint" Model="SpectreFootprint"/>
        <DeathArray index="Normal" ModelLink="NatashaDeath23" SoundLink="AuspyDeathVioce" VoiceLink=""/>
        <DeathArray index="Timeout" ModelLink="Invisible" SoundLink="AuspyVioce42"/>
        <DeathArray index="Salvage" AnimProps="Death" ModelLink="NatashaDeath23" SoundLink="AuspyDeathVioce"/>
        <PortraitModel value="AlliedSpyPortrait"/>
        <WalkAnimMoveSpeed value="2"/>
        <BarOffset value="70"/>
        <BarWidth value="40"/>
        <SoundArray index="Birth" value="Spectre_Birth"/>
        <SoundArray index="Ready" value="AuspyVioce"/>
        <SoundArray index="Attack" value="AlliedSpy_Yes"/>
        <SoundArray index="Movement" value="Spectre_Movement"/>
        <SoundArray index="Turning" value="Spectre_Turning"/>
        <SoundArray index="Board" value="Spectre_Board"/>
        <SoundArray index="Click" value="AlliedSpy_What"/>
        <SoundArray index="ClickError" value="Spectre_ClickError"/>
        <SoundArray index="Highlight" value="Spectre_Highlight"/>
        <AbilSoundArray AbilCmd="AlliedSpyBribery,Execute" Sound="AlliedSpy_Pissed"/>
    </CActorUnit>
    <CActorSquib id="RASpyBriberySpecialEffectsTakeEffect">
        <Flags index="SuppressSaveLoad" value="1"/>
        <On Terms="ActorCreation" Send="AnimBracketStart BSD Birth Stand Death ContentPlayOnce"/>
        <On Terms="AnimBracketState.*.AfterClosing; AnimName BSD" Send="Destroy"/>
        <On Terms="Effect.AlliedSpyBriberyEA.Start" Send="Create"/>
        <Map index="None" Model="AlliedSpyBriberyImpact" Sound="AuspyVioce522"/>
        <Map index="Miss" Model="AlliedSpyBriberyImpact"/>
    </CActorSquib>
    <CBehaviorBuff id="MindControl23">
        <InfoFlags index="Hidden" value="1"/>
        <InfoIcon value="Assets\Textures\ui_glues_ladder_score_rating_down.dds"/>
        <EditorCategories value="Race:Terran,AbilityorEffectType:Units"/>
        <DisplayDuration index="Self" value="1"/>
        <DisplayDuration index="Ally" value="1"/>
        <DisplayDuration index="Enemy" value="1"/>
        <TimeScaleSource Value="Global"/>
        <Duration value="60"/>
        <Modification SightBonus="5">
            <ModifyFlags index="DisableAbils" value="1"/>
            <ModifyFlags index="DisableWeapons" value="1"/>
            <ModifyFlags index="Reveal" value="1"/>
            <ModifyFlags index="Detected" value="1"/>
            <ModifyFlags index="ShareSight" value="1"/>
            <ModifyFlags index="SuppressMoving" value="1"/>
            <ModifyFlags index="SuppressTurning" value="1"/>
            <StateFlags index="RevealProgress" value="1"/>
            <StateFlags index="SuppressCloak" value="1"/>
            <StateFlags index="SuppressDetection" value="1"/>
            <StateFlags index="SuppressRadar" value="1"/>
        </Modification>
    </CBehaviorBuff>
    <CButton id="AlliedSpyDisguise" parent="Allied" icon="ability-spy-disguise"/>
    <CButton id="AlliedSpyBribery" parent="Allied" icon="ability-spy-bribe"/>
    <CButton id="AlliedSpyInfiltrate" parent="Allied">
        <Icon value="Assets\Textures\ui_glues_ladder_score_rating_down.dds"/>
    </CButton>
    <CEffectModifyUnit id="AlliedSpyBriberyMU">
        <ModifyFlags index="Owner" value="1"/>
    </CEffectModifyUnit>
    <CEffectApplyBehavior id="EngineerCaptureBuildings5">
        <ValidatorArray index="0" removed="1"/>
        <Behavior value="MindControl23"/>
    </CEffectApplyBehavior>
    <CEffectEnumArea id="AlliedSpyBriberyEA">
        <SearchFilters value="Ground;Self,Player,Ally,Neutral,Psionic,Structure,Heroic,Worker,RawResource,HarvestableResource,Missile,Cloaked,Stasis,UnderConstruction,Dead,Hidden,Invulnerable,HeroUnit"/>
        <AreaArray Radius="3" Effect="AlliedSpyBriberyMU"/>
    </CEffectEnumArea>
    <CEffectApplyBehavior id="AlliedSpyDisguiseCamouflage">
        <WhichUnit Value="Target"/>
        <Behavior value="AlliedSpyDisguiseCamouflage"/>
    </CEffectApplyBehavior>
    <CEffectRemoveBehavior id="AlliedSpyDisguiseCamouflageRB">
        <BehaviorLink value="AlliedSpyDisguiseCamouflage"/>
    </CEffectRemoveBehavior>

    <CModel id="AlliedSpyPortrait" parent="Portrait" Race="Terran">
        <Model value="Assets\Portraits\Terran\Battlecruiser_HornerHan_Portrait\Battlecruiser_HornerHan_Portrait.m3"/>
        <Flags index="Download" value="1"/>
        <Image value="Assets\Textures\battlecruiser_hornerhan_portrait_static.dds"/>
    </CModel>
    <CModel id="AlliedSpyBriberyImpact" parent="ImpactFX">
        <Model value="Assets\Effects\Protoss\TimeWarpImpact_Red\TimeWarpImpact_Red.m3"/>
        <EditorCategories value="Race:Terran"/>
        <ScaleMax value="4.000000,4.000000,4.000000"/>
        <ScaleMin value="4.000000,4.000000,4.000000"/>
    </CModel>
    <CModel id="NatashaDeath23" parent="UnitDeath" Race="Terran">
        <Model value="assets\units\Allied\Spy.m3"/>
        <SelectionOffset value="0.000000,0.000000,-0.500000"/>
        <SelectionRadius value="1.250000"/>
    </CModel>
    <CModel id="AlliedSpy" parent="Unit">
        <ScaleMax value="0.850000,0.850000,0.850000"/>
        <ScaleMin value="0.850000,0.850000,0.850000"/>
        <Model value="assets\units\Allied\Spy.m3"/>
        <EditorCategories value="Race:Terran"/>
        <Flags index="AutoUnload" value="1"/>
        <Occlusion value="Show"/>
        <PlanetPanelCamera value="Star2CameraMid04"/>
        <Radius value="0.375000"/>
        <SelectionRadius value="0.305000"/>
        <ShadowRadius value="0.375000"/>
        <SquibTypeDefault value="Flesh"/>
        <TechPurchaseCamera value="TechPurchaseInfantry"/>
        <TextureDeclares Prefix="Spectre_">
            <Adaptions TriggerOnSubstring="_Diffuse" Slot="main"/>
            <Adaptions TriggerOnSubstring="_Emissive" Slot="main"/>
        </TextureDeclares>
        <UnitGlossaryCamera value="Star2CameraMid04"/>
    </CModel>
    <CSound id="AlliedSpy_Help" parent="TerranAck_Void">
        <AssetArray File="assets\sounds\the-spy-was-attacked-1.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\the-spy-was-attacked-2.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\the-spy-was-attacked-3.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\the-spy-was-attacked-4.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\the-spy-was-attacked-5.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\the-spy-was-attacked-6.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\the-spy-was-attacked7.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\the-spy-was-attacked8.ogg" FacialGroup=""/>
        <Flags index="NeedsUpdate" value="1"/>
        <Flags index="NeedsTTS" value="1"/>
        <Volume value="1.000000,1.000000"/>
    </CSound>
    <CSound id="AlliedSpy_What" parent="TerranAck_Void">
        <AssetArray File="assets\sounds\spy-choice-1.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-choice-2.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-choice-3.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-choice-4.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-choice-5.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-choice-6.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-choice-7.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-choice-8.ogg" FacialGroup=""/>
        <Flags index="NeedsUpdate" value="1"/>
        <Flags index="NeedsTTS" value="1"/>
        <Volume value="1.000000,1.000000"/>
    </CSound>
    <CSound id="AuspyDeathVioce" parent="Death">
        <EditorCategories value="Race:Terran"/>
        <AssetArray File="assets\sounds\spy-dies-1.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-dies-10.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-dies-11.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spies-die-2.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-dies-3.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spies-die-4.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-dies-5.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-dies-6.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-dies-7.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-dies-8.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-dies-9.ogg" FacialGroup=""/>
        <Flags index="Download" value="0"/>
        <Volume value="3.000000,3.000000"/>
    </CSound>
    <CSound id="AuspyVioce5" parent="Spell">
        <EditorCategories value="Race:Terran"/>
        <AssetArray File="assets\sounds\spy-disguise-sound-effect-1.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-disguise-sound-effects-2.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-disguise-sound-effects-3.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-disguise-sound-effects-4.ogg" FacialGroup=""/>
        <Flags index="Ignorable" value="1"/>
        <Flags index="Purgable" value="0"/>
        <Flags index="Stream" value="1"/>
        <Flags index="NeedsUpdate" value="1"/>
        <Flags index="NeedsTTS" value="1"/>
    </CSound>
    <CSound id="AuspyVioce42" parent="TerranAck_Void">
        <AssetArray File="Assets\sounds\allied-lieutenant:-the-enemy&apos;s-building-has-been-infiltrated.ogg" FacialGroup=""/>
        <Flags index="NeedsUpdate" value="1"/>
        <Flags index="NeedsTTS" value="1"/>
        <Volume value="1.000000,1.000000"/>
    </CSound>
    <CSound id="AlliedSpy_Yes" parent="TerranAck_Void">
        <AssetArray File="assets\sounds\spy-mobile-1.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-10.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-11.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-12.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-2.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-3.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-4.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-5.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-6.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-7.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-8.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-mobile-9.ogg" FacialGroup=""/>
        <Flags index="NeedsUpdate" value="1"/>
        <Flags index="NeedsTTS" value="1"/>
        <Volume value="1.000000,1.000000"/>
    </CSound>
    <CSound id="AlliedSpy_Pissed" parent="TerranAck_Void">
        <AssetArray File="assets\sounds\spy-bribery-1.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-2.ogg" FacialGroup=""/>
        <AssetArray File="assets\sounds\spy-3.ogg" FacialGroup=""/>
        <Flags index="NeedsUpdate" value="1"/>
        <Flags index="NeedsTTS" value="1"/>
        <Volume value="1.000000,1.000000"/>
    </CSound>
    <CSound id="AuspyVioce" parent="TerranAck_Void">
        <AssetArray File="assets\sounds\spy-ready1.ogg" FacialGroup=""/>
        <Flags index="NeedsUpdate" value="1"/>
        <Flags index="NeedsTTS" value="1"/>
        <Volume value="1.000000,1.000000"/>
    </CSound>
    <CSound id="AuspyVioce522" parent="Spell">
        <EditorCategories value="Race:Terran"/>
        <AssetArray File="assets\sounds\sound-effects-controlled-by-yuri.ogg" FacialGroup=""/>
        <Flags index="Ignorable" value="1"/>
        <Flags index="Purgable" value="0"/>
        <Flags index="Stream" value="1"/>
        <Flags index="NeedsUpdate" value="1"/>
        <Flags index="NeedsTTS" value="1"/>
    </CSound>
    <CAbilEffectTarget id="AlliedSpyDisguise">
        <Flags index="Smart" value="1"/>
        <Range value="500"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="AlliedSpyInfiltrate"/>
        <Cost>
            <Cooldown TimeUse="5" TimeStart="5"/>
        </Cost>
        <Flags index="BestUnit" value="0"/>
        <TargetFilters value="Ground,Visible;Structure,Self,Player,Ally,Neutral,Dead,Hidden,Missile,Stasis,Invulnerable,MapBoss"/>
        <Flags index="AutoCast" value="1"/>
        <Flags index="AutoCastOn" value="1"/>
        <Flags index="AutoCastOffOwnerLeave" value="1"/>
        <AutoCastAcquireLevel value="Defensive"/>
        <AutoCastFilters value="Ground,Light,Biological;Structure,Player,Ally,Neutral,User1,Stasis,Invulnerable,MapBoss"/>
        <AutoCastRange value="13"/>
        <AutoCastValidatorArray value="UBN_AlliedSpyDisguiseCamouflage"/>
        <Effect index="0" value="AlliedSpyDisguiseEx3"/>
    </CAbilEffectTarget>
    <CActorModel id="AlliedSpyDisguise" parent="ModelAnimationStyleOneShot">
        <Aliases value="_Snapshot"/>
        <Flags index="SuppressSaveLoad" value="0"/>
        <Inherits index="BaseModelScale" value="1"/>
        <Inherits index="CastShadows" value="1"/>
        <Inherits index="CloakEffect" value="1"/>
        <Inherits index="CreepEngulfment" value="1"/>
        <Inherits index="Decal" value="1"/>
        <Inherits index="ModelMaterials" value="1"/>
        <Inherits index="Opacity" value="1"/>
        <Inherits index="Scale" value="1"/>
        <Inherits index="TeamColor" value="1"/>
        <Inherits index="TimeScale" value="1"/>
        <Inherits index="TintColor" value="1"/>
        <Inherits index="Visibility" value="1"/>
        <Inherits index="WarpGroup" value="1"/>
        <On Terms="Effect.AlliedSpyDisguiseEx3FinalSet.Start; At Caster" Send="Create"/>
        <Model value="HallucinationDeath"/>
        <ModelFlags index="UseSyncSeed" value="1"/>
    </CActorModel>
    <CActorSound id="Ghost_CloakOff2" parent="SoundOneShot">
        <On Terms="Behavior.AlliedSpyDisguiseCamouflage.Off" Send="Create"/>
        <Sound value="Ghost_CloakOff"/>
    </CActorSound>
    <CActorSound id="Ghost_CloakOn2" parent="SoundOneShot">
        <On Terms="Behavior.AlliedSpyDisguiseCamouflage.On" Send="Create"/>
        <Sound value="AuspyVioce5"/>
    </CActorSound>
    <CBehaviorBuff id="AlliedSpyDisguiseCamouflage">
        <Alignment value="Positive"/>
        <InfoIcon value="Assets\Textures\war3_btncloakofflames.dds"/>
<!--        <Modification>-->
<!--            <StateFlags index="Cloak" value="1"/>-->
<!--            <StateFlags index="Benign" value="1"/>-->
<!--        </Modification>-->
    </CBehaviorBuff>


    <CAbilEffectInstant id="AlliedSpyDisguiseCancel">
        <Flags index="BestUnit" value="0"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="Cancel" Requirements="CBU_AlliedSpyDisguiseCamouflage"/>
    </CAbilEffectInstant>
    <CEffectSet id="AlliedSpyDisguiseCancel">
        <EffectArray value="AlliedSpyDisguiseCamouflageRB"/>
        <EffectArray value="AlliedSpyUncoverCU"/>
    </CEffectSet>

    <CEffectCreatePersistent id="RASpyUnmaskingInitialDelay">
        <WhichLocation Value="SourceUnit"/>
        <InitialDelay value="3"/>
        <InitialEffect value="AlliedSpyDisguiseCamouflageRB"/>
        <InitialEffect value="AlliedSpyDisguiseUncover"/>
        <InitialEffect value="AlliedSpyUncoverCU"/>
    </CEffectCreatePersistent>
    <CBehaviorBuff id="AlliedSpyDisguiseUncover">
        <InfoFlags index="Hidden" value="1"/>
        <EditorCategories value="AbilityorEffectType:Units"/>
        <Duration value="3"/>
        <Modification>
            <!--            <BehaviorLinkDisableArray value="RACamouflage"/>-->
            <AbilLinkDisableArray value="AlliedSpyDisguise"/>
            <BehaviorLinkDisableArray value="AlliedSpyDisguiseCamouflage"/>
        </Modification>
    </CBehaviorBuff>
    <CEffectApplyBehavior id="AlliedSpyDisguiseUncover">
        <WhichUnit Value="Caster"/>
        <Behavior value="AlliedSpyDisguiseUncover"/>
    </CEffectApplyBehavior>
    <CEffectCreateUnit id="AlliedSpyUncoverCU">
        <WhichLocation Value="CasterUnit"/>
        <SpawnEffect value="AlliedSpyUncoverFinalSet"/>
        <CreateFlags index="Birth" value="0"/>
        <CreateFlags index="DropOff" value="0"/>
        <CreateFlags index="OffsetByRadius" value="0"/>
        <CreateFlags index="Placement" value="0"/>
        <CreateFlags index="PlacementIgnoreBlockers" value="1"/>
        <CreateFlags index="PlacementIgnoreCliffTest" value="1"/>
        <CreateFlags index="ProvideFood" value="0"/>
        <CreateFlags index="SetFacing" value="1"/>
        <CreateFlags index="SelectControlGroups" value="1"/>
        <CreateFlags index="UseFood" value="0"/>
        <CreateFlags index="NormalizeSpawnOffset" value="0"/>
        <SelectUnit Value="Caster"/>
        <SpawnOwner Value="Caster"/>
        <SpawnUnit value="AlliedSpy"/>
    </CEffectCreateUnit>
    <CEffectSet id="AlliedSpyUncoverFinalSet">
        <EffectArray value="CopyOrders"/>
        <EffectArray value="AlliedSpyDisguiseEx3RemoveCaster"/>
    </CEffectSet>


    <CEffectSet id="AlliedSpyDisguiseEx3">
            <TargetLocationType value="Unit"/>
            <ValidatorArray value="isInfantry"/>
            <EffectArray value="AlliedSpyDisguiseEx3CU"/>
    </CEffectSet>
    <CEffectCreateUnit id="AlliedSpyDisguiseEx3CU">
        <SpawnEffect value="AlliedSpyDisguiseEx3FinalSet"/>
        <WhichLocation Value="CasterUnit"/>
        <CreateFlags index="Birth" value="0"/>
        <CreateFlags index="DropOff" value="0"/>
        <CreateFlags index="OffsetByRadius" value="0"/>
        <CreateFlags index="Placement" value="0"/>
        <CreateFlags index="PlacementIgnoreBlockers" value="1"/>
        <CreateFlags index="PlacementIgnoreCliffTest" value="1"/>
        <CreateFlags index="ProvideFood" value="0"/>
        <CreateFlags index="SetFacing" value="1"/>
        <CreateFlags index="SelectControlGroups" value="1"/>
        <CreateFlags index="UseFood" value="0"/>
        <CreateFlags index="NormalizeSpawnOffset" value="0"/>
        <SelectUnit Value="Caster"/>
        <SpawnOwner Value="Target"/>
        <SpawnUnit value="AlliedSpy"/>
    </CEffectCreateUnit>
    <CEffectSet id="AlliedSpyDisguiseEx3FinalSet">
        <EffectArray value="AlliedSpyDisguiseEx3ChangeOwnerMimicCP"/>
        <EffectArray value="AlliedSpyDisguiseEx3Mimic"/>
        <EffectArray value="CopyOrders"/>
        <EffectArray value="AlliedSpyDisguiseCamouflage"/>
        <EffectArray value="AlliedSpyDisguiseEx3Transfer"/>
        <EffectArray value="AlliedSpyDisguiseEx3RemoveCaster"/>
    </CEffectSet>
    <CEffectCreatePersistent id="AlliedSpyDisguiseEx3ChangeOwnerMimicCP">
        <InitialEffect value="AlliedSpyDisguiseEx3ChangeOwner"/>
        <FinalEffect value="AlliedSpyDisguiseEx3Mimic"/>
    </CEffectCreatePersistent>
    <CEffectModifyUnit id="AlliedSpyDisguiseEx3ChangeOwner">
        <ModifyFlags index="Owner" value="1"/>
        <ModifyOwnerPlayer Value="Caster"/>
        <ImpactUnit Effect="AlliedSpyDisguiseEx3FinalSet"/>
    </CEffectModifyUnit>
    <CEffectModifyUnit id="AlliedSpyDisguiseEx3Mimic">
        <ImpactUnit Effect="AlliedSpyDisguiseEx3"/>
        <ModifyFlags index="Mimic" value="1"/>
        <LaunchUnit Effect="AlliedSpyDisguiseEx3FinalSet" Value="Target"/>
    </CEffectModifyUnit>
    <CEffectTransferBehavior id="AlliedSpyDisguiseEx3Transfer">
        <LaunchUnit Value="Caster"/>
        <ImpactUnit Value="Target"/>
        <Behavior value="AlliedSpyDisguiseCamouflage"/>
    </CEffectTransferBehavior>
    <CEffectDamage id="AlliedSpyDisguiseEx3RemoveCaster">
        <Flags index="Kill" value="1"/>
        <Flags index="NoKillCredit" value="1"/>
        <Death value="Remove"/>
        <ImpactLocation Value="CasterUnit"/>
    </CEffectDamage>

    <CRequirement id="CBU_AlliedSpyDisguiseCamouflage">
        <NodeArray index="Show" Link="CBU_AlliedSpyDisguiseCamouflage"/>
    </CRequirement>
    <!-- CBU - count behavior at unit GT 0 -->
    <CRequirementCountBehavior parent="CBU" id="CBU_AlliedSpyDisguiseCamouflage" behavior="AlliedSpyDisguiseCamouflage"/>

    <CValidatorUnitCompareBehaviorCount id="UBN_AlliedSpyDisguiseCamouflage" behavior="AlliedSpyDisguiseCamouflage" parent="UBN"/>


    <CSound id="UnknownSound72" parent="Combat">
        <AssetArray File="Assets\sounds\random-treasure-chest-pickup-cash-reward-ubonus.ogg" FacialGroup=""/>
        <Flags index="Purgable" value="0"/>
        <Volume value="2.000000,2.000000"/>
    </CSound>
<!--    <CActorSquib id="RARandomTreasureChestCashRewardEffect">-->
<!--        <Flags index="SuppressSaveLoad" value="1"/>-->
<!--        <On Terms="ActorCreation" Send="AnimBracketStart BSD Birth Stand Death ContentPlayOnce"/>-->
<!--        <On Terms="AnimBracketState.*.AfterClosing; AnimName BSD" Send="Destroy"/>-->
<!--        <On Terms="Effect.cashreward11022.Start; At Effect" Send="Create"/>-->
<!--        <Map index="None" Model="TychusTossGrenadeImpact22323" Sound="UnknownSound72"/>-->
<!--    </CActorSquib>-->
    <CActorSquib id="RASpyBriberySpecialEffects">
        <Flags index="SuppressSaveLoad" value="1"/>
        <On Terms="ActorCreation" Send="AnimBracketStart BSD Birth Stand Death ContentPlayOnce"/>
        <On Terms="AnimBracketState.*.AfterClosing; AnimName BSD" Send="Destroy"/>
        <On Terms="Abil.AlliedSpyBribery.SourcePrepStart" Send="Create"/>
        <Map index="None" Model="TychusTossGrenadeImpact22323" Sound="AuspyVioce52"/>
        <Map index="Miss" Model="TychusTossGrenadeImpact22323" Sound="AuspyVioce52"/>
    </CActorSquib>
    <CModel id="TychusTossGrenadeImpact22323" parent="ImpactFX">
        <Model value="Assets\UI\Feedback\War3_GoldCredit\War3_GoldCredit.m3"/>
        <EditorCategories value="Race:Terran"/>
    </CModel>
</Catalog>