<Catalog>
    <CAbilEffectInstant id="CNCStructureSalvageRefund" parent="Refund">
        <Cost>
            <Resource index="Minerals" value="0"/>
        </Cost>
    </CAbilEffectInstant>

    <CEffectIssueOrder id="CNCSalvage">
        <EditorCategories value="Race:Terran"/>
        <Abil value="CNCStructureSalvageRefund"/>
        <WhichUnit Value="Caster"/>
        <CmdFlags index="Preempt" value="1"/>
    </CEffectIssueOrder>
    <CButton id="CNCSalvage">
        <Icon value="Assets\Textures\btn-ability-terran-salvage.dds"/>
        <AlertIcon value="Assets\Textures\btn-ability-terran-salvage.dds"/>
        <EditorCategories value="Race:Terran"/>
        <TintRacially value="1"/>
    </CButton>
    <CBehaviorBuff id="CNCSalvage">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Structures"/>
        <Duration value="5"/>
        <ExpireEffect value="CNCSalvage"/>
        <InfoFlags index="Hidden" value="1"/>
        <DisplayDuration index="Self" value="1"/>
        <DisplayDuration index="Ally" value="1"/>
        <Modification>
            <ModifyFlags index="DisableAbils" value="1"/>
            <ModifyFlags index="SuppressMoving" value="1"/>
            <ModifyFlags index="SuppressTurning" value="1"/>
            <StateFlags index="SuppressAttack" value="1"/>
            <StateFlags index="SuppressCloak" value="1"/>
            <StateFlags index="SuppressDetection" value="1"/>
            <StateFlags index="SuppressRadar" value="1"/>
            <AbilLinkEnableArray value="##id##"/>
            <AbilLinkEnableArray value="CNCStructureSalvageRefund"/>
<!--            <BehaviorLinkDisableArray value="SensorTowerRadar"/>-->
        </Modification>
        <Name value="Behavior/Name/Salvage"/>
    </CBehaviorBuff>
    <CAbilBehavior id="CNCSalvage">
        <EditorCategories value="Race:Terran,AbilityorEffectType:Structures"/>
        <CmdButtonArray index="On" DefaultButtonFace="CNCSalvage">
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <Flags index="BestUnit" value="1"/>
        <Flags index="Transient" value="1"/>
        <BehaviorArray value="CNCSalvage"/>
        <ValidatorArray value="HasNoCargo"/>
        <Name value="Abil/Name/CNCSalvage"/>
    </CAbilBehavior>

</Catalog>